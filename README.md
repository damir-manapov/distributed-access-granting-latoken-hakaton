
# Сайдчейн Ethereum для распределенного авторизованного аутентифицированного доступа к файлам

Ethereum sidechain for distributed authorized authenticated file access


Мы не обращаем сейчас на экономическую часть вопроса, почему майнеры захотят этим занимать, какова будет их за это награда

Размещаем мы куски ключа на 10% процентах от всех нод

Идентификатор ноды это кощелек майнера, смайнивщего минимум 1 блок эфира, привязанный к ноде, таким образом мы исключаем возможно произвольного создания неограниченного количества нод

Связка кошелька с ай-пи адресом осуществляется через смарт контракт. Установить или изменить соответствие кошелька ип-ажресе:порту может только владелец этого кошелька

Нода нашей сети содержит в себе ноду эфира и дополнительную ноду, обеспечивающую рабту нашего протокола

Если у нас много нод участников и мы хотим разбить расшифровывающий ключ на большое количество частей, то его самого может не хватить, в это случае мы можем, к примеру, сканкатенировать его с нонсем, который может пробегать, скажем от 1 до 10, 100 или 1000 и конкатенированных хеш от таких сочетаний может использоваться для определения на каких нода хранить куски ключа. Если мы хотим хранить ключ на большем количестве нод чем, к примеру, количество бит в ключе мы может дополнить его произвольным количеством бит, зашифровать эту последовательнось, получив длинную строку, которую распределим по нодам а ключ для расшифровки хранить в открытом виде

Мы разбиваем ключ для расшифровки на n кусков, определяем какие ноды его должны хранить и передаем каждой из них соответствующий кусок с адресом контракта, который должен подтвердить что тот, кто придет за жтим куском действительно имеет на жто право.

Такой подтверждающий конракт может, к примеру, проверять историю транзакций адреса запрашивающего. Покупал ли он какой-то ассет, к примеру

Когда пользователь желает получить доступ к файлу он таким же образом хеширует идентификатор файла, обращается к контракту, получает идентификаторы нод и соответствующие им ип-адреса, определяет на каких нодах должны лежать куски ключа и запрашивает их у этих нод.

Нода получив запрос проверяет что запрашивающий действительно владеет кошельком, которым утверждает что владеет, для этого он посылает публичный ключ и адрес кошелька подписанный прватным ключем. Мы получаем адрес кошелька из публичного ключа, после чего проверяем что подпись адреса сделанная секретным ключем валидируется публичным ключом

После этого нода запрашивает контракт, адрес которого оставил размещающий кусок дешивруещего ключа, может ли владелец такого-то кошелька получить доступ к файлу. Если контракт утверждает утвердительно нода передает хранящийся у нее кусок дешифруещего ключа запрашивающему

Как вариант, возможно, мы при размещении куска дешифруешего ключа можем запрашивать у ноды доказательсво, что она по-прежнему владеет приватным клчем, связанным со прикрепленным к ней адресом кошелька
