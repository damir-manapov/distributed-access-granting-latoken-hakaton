
# Сайдчейн Ethereum для распределенного авторизованного аутентифицированного доступа к файлам

Ethereum sidechain for distributed authorized authenticated file access


Мы не обращаем сейчас на экономическую часть вопроса, почему майнеры захотят этим занимать, какова будет их за это награда

Размещаем мы куски ключа на 10% процентах от всех нод

Идентификатор ноды это кошелек майнера, смайнившего минимум 1 блок эфира, таким образом мы исключаем возможность произвольного создания неограниченного количества нод

Связка кошелька с ай-пи адресом осуществляется через смарт контракт. Установить или изменить соответствие кошелька - ип-адрес:порт может только владелец этого кошелька

Нода нашей сети содержит в себе ноду эфира и дополнительную ноду, обеспечивающую работу нашего протокола

Если у нас много нод участников и мы хотим разбить расшифровывающий ключ на большое количество частей, то его самого может не хватить, в это случае мы можем, к примеру, сканкатенировать его с нонсом, который может пробегать, скажем от 1 до 10, 100 или 1000 и конкатенированный хеш от таких сочетаний может использоваться для определения на каких нода хранить куски ключа. Если мы хотим хранить ключ на большем количестве нод чем, к примеру, количество бит в ключе мы может дополнить его произвольным количеством бит, зашифровать эту последовательность, получив длинную строку, которую распределим по нодам а ключ для расшифровки хранить в открытом виде (тут нужно подумать, алгоритмы шифрования рассчитаны на то что нельзя расшифровать данные имея из в зашифрованном виден но не имея ключа, будут ли они достаточно сильны когда есть ключ но нет зашифрованных данных целиком - вопрос, нужно разбираться отдельно)

Мы разбиваем расшифровывающий ключ на n кусков, определяем какие ноды его должны хранить и передаем каждой из них соответствующий кусок с адресом контракта, который должен подтвердить что тот, кто придет за этим куском действительно имеет на это право.

Такой подтверждающий конракт может, к примеру, проверять историю транзакций совершенных с адреса запрашивающего пользователя. Покупал ли он какой-то ассет, к примеру.

Когда пользователь желает получить доступ к файлу он таким же образом хеширует идентификатор файла, обращается к контракту, получает идентификаторы нод и соответствующие им ип-адреса, определяет на каких нодах должны лежать куски ключа и запрашивает их у этих нод.

Нода получив запрос проверяет что запрашивающий действительно владеет кошельком, которым утверждает что владеет, для этого он посылает публичный ключ и адрес кошелька подписанный прватным ключем. Мы получаем адрес кошелька из публичного ключа, после чего проверяем что подпись адреса сделанная секретным ключем валидируется публичным ключом.

После этого нода спрашивает контракт, адрес которого был оставлен в момент регистрации куска дешифрующего ключа, может ли владелец такого-то кошелька получить доступ к файлу. Если контракт утверждает утвердительно нода передает хранящийся у нее кусок дешифруещего ключа.

Как вариант, возможно, мы при размещении куска дешифруешего ключа можем запрашивать у ноды доказательство, что она по-прежнему владеет приватным ключем, связанным со прикрепленным к ней адресом кошелька

Тк адрес майнера мы можем получить только у текущего блока первое время будет проводиться инициализация, каждый блок будет сохраняться адрес майнера этого блока. Так будет до тех пор пока не накопится минимально необходимое для работы количество адресов, к которым будут привязаны ноды. В день создается около 2820 блоков. Это дополнительно 2820 потенциальных нод ежедневно (Разумеется не все согласятся участвовать, часть блоков будут смайнена одними и теми же майнерами) 
